<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Raw Novel Source Helper</title>
  <link rel="stylesheet" href="styles/styles.css" />
</head>
<body>
  <header class="page-header">
    <h1>Raw Novel Source Helper</h1>
    <p class="lede">
      Generate advanced search URLs (Google / Bing / Baidu) for a fixed source list, then paste a result URL to extract the source + serie_id.
    </p>
  </header>

  <main>
    <!-- Step 1: Build search links -->
    <section class="card">
      <h2>1) Enter raw title (non-English)</h2>

      <label for="rawTitle">Raw title</label>
      <div class="input-row">
        <input id="rawTitle" type="text" placeholder="e.g., 诡秘之主" />
        <button id="buildLinks" class="primary" type="button">Generate search links</button>
      </div>

      <div class="input-row controls-row">
        <div class="control">
          <label for="engine">Search engine</label>
          <select id="engine">
            <option value="google">Google</option>
            <option value="bing">Bing</option>
            <option value="baidu">Baidu</option>
          </select>
        </div>

        <div class="control">
          <label for="mode">Search mode</label>
          <select id="mode">
            <option value="exact_all">Exact phrase (ALL sources)</option>
            <option value="intitle_all">Title-only (ALL sources)</option>
            <option value="inurl_book_all">URL pattern (book/page) (ALL sources)</option>
            <option value="exact_each">Exact phrase (PER source)</option>
            <option value="intitle_each">Title-only (PER source)</option>
            <option value="inurl_book_each">URL pattern (book/page) (PER source)</option>
          </select>
        </div>
      </div>

      <details class="advanced">
        <summary>Advanced options (optional)</summary>

        <div class="input-row advanced-row">
          <div class="control grow">
            <label for="also">Also match (OR)</label>
            <input id="also" type="text" placeholder="e.g., 詭秘之主 (traditional), or other alias" />
          </div>

          <div class="control grow">
            <label for="exclude">Exclude words</label>
            <input id="exclude" type="text" placeholder="e.g., 同人 续 目录 最新" />
          </div>
        </div>

        <p class="help-text">
          Tip: “Also match” becomes (<code>RAW</code> OR <code>ALSO</code>). “Exclude” becomes <code>-word</code>.
        </p>
      </details>

      <p class="help-text">
        This tool generates search URLs only (no scraping). Click results in a new tab, then paste a novel URL below.
      </p>

      <div id="searchLinks" class="links-grid" aria-live="polite"></div>
    </section>

    <!-- Step 2: Paste URL -->
    <section class="card">
      <h2>2) Paste a novel page URL</h2>
      <label for="novelUrl">Novel URL (from any supported source)</label>

      <div class="input-row">
        <input id="novelUrl" type="url" placeholder="Paste the novel page URL you found" />
        <button id="detect" class="primary" type="button">Detect source</button>
      </div>

      <p class="help-text">
        After you click a search link, open the novel page, then copy & paste the URL here.
      </p>
    </section>

    <!-- Results -->
    <section class="card">
      <div class="results-header">
        <div>
          <p class="eyebrow">Results</p>
          <h2 class="results-title">Detected source + canonical link</h2>
          <p id="hint" class="placeholder">Generate search links or paste a URL to begin.</p>
        </div>
        <span id="status" class="status-pill">Idle</span>
      </div>

      <div id="meta" class="meta"></div>

      <div class="results-body">
        <ul id="list" class="results-list"></ul>
      </div>
    </section>
  </main>

  <footer class="page-footer">
    <p>
      Note: Search results depend on the chosen engine and indexing. This tool does not scrape or store queries.
    </p>
  </footer>

  <script src="js/app.js" type="module"></script>
</body>
</html>
